---
layout: post
title: DNS解析之A记录与CNAME记录的区别
category: 技术
tags: [DNS解析]
date: 2017-03-16
---
前段时间表妹的注册了腾讯企业邮箱，想修改邮箱地址后缀，需要在她买好的域名管理界面进行操作，但是始终无法进入DNS解析管理界面增加MX记录，需要将域名DNS服务器修改为默认，她又不敢乱动，然后就来找到我。<!-- more -->我又义不容辞的接受了，然后我就按照指示乱动了，然后邮箱地址后缀改好可用了，网站挂了😂。

前几天看到表妹朋友圈，说和同学把网站救活了，今天突然想起就很好奇的请教了一下，原来是需要增加CNAME记录。可是CNAME记录是什么，为什么要加呢？Google！

在搜索CNAME记录的时候看到了A记录和它一起出现了，那它们又是什么关系呢？

通过浏览各种解释，主要有以下几个概念需要弄明白：

1. 什么是域名解析？  
通过之前阅读《图解HTTP》可知，域名解析就是DNS服务通过域名告知用户网页IP地址，然后访问到网页的服务器。

2. 什么是A记录？  
A (Address) 记录是用来指定主机名（或域名）对应的IP地址记录。用户可以将该域名下的网站服务器指向到自己的web server上。同时也可以设置域名的二级域名。  
*A记录是IP解析，直接将域名指向某个IP，如果IP有所变动，那么A记录那边也必须更改。*

3. 什么是CNAME记录？  
即：别名记录。这种记录允许将多个名字映射到另外一个域名。通常用于同时提供WWW和MAIL服务的计算机。例如，有一台计算机名为“host.mydomain.com”（A记录）。它同时提供WWW和MAIL服务，为了便于用户访问服务。可以为该计算机设置两个别名（CNAME）：WWW和MAIL。这两个别名的全称就 http://www.mydomain.com/和“mail.mydomain.com”。实际上他们都指向 “host.mydomain.com”。  
*CNAME是别名解析，别名解析是先将域名解析到主机别名再转跳到IP，这样主机IP改变了不用重新解析。*

4. A记录与CNAME记录的区别？  
A记录就是把一个域名解析到一个IP地址（Address，特制数字IP地址），而CNAME记录就是把域名解析到另外一个域名。其功能是差不多，CNAME将几个主机名指向一个别名，其实跟指向IP地址是一样的，因为这个别名也要做一个A记录的。但是使用CNAME记录可以很方便地变更IP地址。如果一台服务器有100个网站，他们都做了别名，该台服务器变更IP时，只需要变更别名的A记录就可以了。
	- cname解析的生效时间要比A记录快，A记录往往要几个小时至48小时，cname几分钟即可。
	- 如果是A记录，一旦主机的IP发生变化，则必须重新解析；如果是cname解析，则无需重新解析。
	
5. 使用A记录和CNAME哪个好？  
	- 域名解析CNAME记录A记录哪一种比较好？如果论对网站的影响，就没有多大区别。但是：CNAME有一个好处就是稳定，就好像一个IP与一个域名的区别。服务商从方便维护的角度，一般也建议用户使用CNAME记录绑定域名的。如果主机使用了双线IP，显然使用CNAME也要方便一些。
	  
	- A记录也有一些好处，例如可以在输入域名时不用输入WWW.来访问网站哦！从SEO优化角度来看，一些搜索引擎如alex或一些搜索查询工具网站等等则默认是自动去掉WWW.来辨别网站，CNAME记录是必须有如：WWW(别名)前缀的域名，有时候会遇到这样的麻烦，前缀去掉了默认网站无法访问。  
	- 有人认为，在SEO优化网站的时候，由于搜索引擎找不到去掉WWW.的域名时，对网站权重也会有些影响。因为有些网民客户也是不喜欢多写三个W来访问网站的，网站无法访问有少量网民客户会放弃继续尝试加WWW.访问域名了，因此网站访问浏览量也会减少一些。  
	- 也有人认为同一个域名加WWW.和不加WWW.访问网站也会使网站权重分散，这也是个问题。但是可以使用301跳转把不加WWW.跳转到加WWW.的域名，问题就解决了。


6. 什么时候用A记录，什么时候用CNAME记录？
	- 经常换IP，建议用CNAME别名解析，不经常换IP，建议用A记录直接解析到IP。

	- 多线空间，必须用CNAME别名解析。

转自[https://www.cloudxns.net/Support/detail/id/2215.html](https://www.cloudxns.net/Support/detail/id/2215.html)

由于这个域名即绑定了企业邮箱，又绑定了网站，所以必须要用CNAME，而用了CNAME在访问网站时就必须加WWW。

然后问题又来了，CNAME的记录值是怎么来的😂，请教了下表妹，她告诉我他们用的新浪云放网站，然后我傻逼的问，“你们把网站放到别的地方了啊？”，表妹说，“网站都要上传到一个空间啊”。好吧，我好像明白了，新浪云就像github一样，代码托管在上面，就是新浪云收费而已。然后，为什么新浪云不能像github page一样直接访问呢？

好吧，问题太多了😂。今天说好的看书呢？又只看了一点，这追本溯源的方式简直停不下来……我觉得自己需要脑补下如何建站了，需要建立一个全局观，这样对以后的学习路径规划也有好处。今天就到这吧，眼睛都挣不开了……
